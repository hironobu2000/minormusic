
<body>

<div id="splash">
  <div id="splash_text"></div>
</div>

<script>
  var bar = new ProgressBar.Line(splash_text, {//id名を指定
	easing: 'easeInOut',//アニメーション効果linear、easeIn、easeOut、easeInOutが指定可能
	duration: 1000,//時間指定(1000＝1秒)
	strokeWidth: 0.2,//進捗ゲージの太さ
	color: '#555',//進捗ゲージのカラー
	trailWidth: 0.2,//ゲージベースの線の太さ
	trailColor: '#bbb',//ゲージベースの線のカラー
	text: {//テキストの形状を直接指定				
		style: {//天地中央に配置
			position: 'absolute',
			left: '50%',
			top: '50%',
			padding: '0',
			margin: '-30px 0 0 0',//バーより上に配置
			transform:'translate(-50%,-50%)',
			'font-size':'1rem',
			color: '#fff',
		},
		autoStyleContainer: false //自動付与のスタイルを切る
	},
	step: function(state, bar) {
		bar.setText(Math.round(bar.value() * 100) + ' %'); //テキストの数値
	}
  });

  //アニメーションスタート
  bar.animate(1.0, function () {//バーを描画する割合を指定します 1.0 なら100%まで描画します
	  $("#splash").delay(500).fadeOut(800);//アニメーションが終わったら#splashエリアをフェードアウト
  });  
</script>

<div class="svg-sample">
    <div class="u-sp">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 152"><path fill="#d8dee9" fill-opacity="1" d="M0,96L80,112C160,128,320,160,480,149.3C640,139,800,85,960,74.7C1120,64,1280,96,1360,112L1440,128L1440,0L1360,0C1280,0,1120,0,960,0C800,0,640,0,480,0C320,0,160,0,80,0L0,0Z"></path></svg>
    </div>
    <div class="u-pc">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 152"><path fill="#d8dee9" fill-opacity="1" d="M0,96L30,112C60,128,120,160,180,149.3C240,139,300,85,360,69.3C420,53,480,75,540,74.7C600,75,660,53,720,42.7C780,32,840,32,900,48C960,64,1020,96,1080,101.3C1140,107,1200,85,1260,80C1320,75,1380,85,1410,90.7L1440,96L1440,0L1410,0C1380,0,1320,0,1260,0C1200,0,1140,0,1080,0C1020,0,960,0,900,0C840,0,780,0,720,0C660,0,600,0,540,0C480,0,420,0,360,0C300,0,240,0,180,0C120,0,60,0,30,0L0,0Z"></path></svg>
    </div>
</div>


<h2>投稿を検索</h2>
<div class="webserch">
<br>
<%= form_tag({controller:"posts",action:"index"}, method: :get) do %>
  <%= text_field_tag :search %>
  <%= submit_tag '検索する'  %>
<% end %>
<br>
</div>
<div class="wrapper">
  <div class="col">
    <a href="#area-2" class="scroll-down-box alt">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 483.39 479.3" class="scroll-text"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M107.77,50.42c-3,2.13-4.29,4.66-2.76,6.82,5.2,7.32,23.47-11.8,33.57,2.55,5.52,7.77,1.75,16.77-7.05,23a34.24,34.24,0,0,1-22,6.15l-1.63-9.86c6.67.73,14.11-1,18.31-4,3.69-2.62,4.94-5.55,3.21-8C124.09,59.58,106,79,96,64.9c-5.12-7.21-2.15-16.14,7-22.67a34.87,34.87,0,0,1,18.17-6.41l1.81,9.9C117.07,46.2,110.94,48.16,107.77,50.42Z"/><path d="M161.16,22.46a14.65,14.65,0,0,0-8.37,19.33,14.72,14.72,0,0,0,19.28,8.62c4.09-1.6,7.75-5.42,9.73-9.93l8.59,4.2A28.6,28.6,0,0,1,175.2,60c-13.56,5.29-27.73-.76-32.86-13.93s1.47-27,15.22-32.4a27.72,27.72,0,0,1,20.84.54l-3.13,9.59C170.76,21.4,165.38,20.81,161.16,22.46Z"/><path d="M230.23,47.68,221,34.7l-1,.12L209.87,36l1.55,13.83L200.49,51,195.07,2.58l21-2.35c12.66-1.42,20.54,3.86,21.74,14.59.83,7.47-1.75,13.22-7.32,16.65l12.1,14.82ZM208.85,26.81,219,25.69c6-.68,9.17-3.83,8.55-9.37s-4.37-7.7-10.38-7L207,10.42Z"/><path d="M303.39,30.5c-2.32,13.87-15.21,22.66-29.91,20.21s-24.05-14.88-21.73-28.82S266.94-.63,281.63,1.82,305.71,16.56,303.39,30.5Zm-40.52-6.75A15.17,15.17,0,0,0,275.2,41.26a14.92,14.92,0,0,0,17.06-12.61,14.8,14.8,0,0,0-12.07-17.33A15,15,0,0,0,262.87,23.75Z"/><path d="M336.36,18.17,320.55,54l19.1,8.44-3.88,8.79L306.6,58.3l19.7-44.57Z"/><path d="M379.63,42.23,356.83,74l17,12.17L368.2,94,342.29,75.42l28.41-39.6Z"/><path d="M435.76,140.55c-11.94,7.94-26.18,4.63-34.71-8.17l-11.22-16.86,40.56-27,11.45,17.21C450.21,118.3,447.75,132.56,435.76,140.55Zm-6.27-9.29c7.47-5,9.16-13.62,4.53-20.58l-5.25-7.88-25.14,16.74,5.52,8.29C413.66,134.61,422.07,136.2,429.49,131.26Z"/><path d="M456,199.32c-13.4,4.24-27.09-3.27-31.58-17.47s2.34-28.19,15.82-32.44,27,3.31,31.44,17.51S469.46,195.07,456,199.32Zm-12.37-39.16a15.15,15.15,0,0,0-10,18.93,15.18,15.18,0,1,0,10-18.93Z"/><path d="M483.07,220.9l-37,9.24,36.47,11.14-.29,10.79-37,9.31,36.47,11.14-.3,11.28-48.28-17.45.31-11.34,35-8.88L434,235.18l.3-11.34,49.14-14.77Z"/><path d="M471.24,313.49l-37.67,11.05,29.3,11.09-3.7,9.76-45.58-17.24,3.55-9.37,37.58-11-29.23-11.05,3.72-9.84,45.57,17.24Z"/><path d="M404.43,375.73a5.13,5.13,0,0,1-1-7.41,5.18,5.18,0,0,1,7.5-.7,5.12,5.12,0,0,1,.94,7.42A5.07,5.07,0,0,1,404.43,375.73Z"/><path d="M375,429.32c3-2.13,4.31-4.65,2.78-6.81-5.17-7.34-23.51,11.7-33.55-2.68-5.49-7.8-1.68-16.78,7.14-23a34.23,34.23,0,0,1,22-6.07l1.59,9.87c-6.67-.76-14.11,1-18.33,4-3.69,2.61-5,5.54-3.23,8,5.29,7.52,23.43-11.81,33.37,2.3,5.09,7.23,2.09,16.15-7.13,22.64a34.85,34.85,0,0,1-18.18,6.34l-1.78-9.9C365.68,433.5,371.81,431.56,375,429.32Z"/><path d="M321.49,457.08a15,15,0,0,0-10.8-28c-4.09,1.57-7.77,5.38-9.77,9.88l-8.57-4.23c2.91-6.79,8.63-12.65,15.25-15.21,13.57-5.23,27.72.87,32.8,14.06s-1.58,27-15.35,32.33a27.69,27.69,0,0,1-20.83-.62l3.17-9.57C311.88,458.09,317.27,458.7,321.49,457.08Z"/><path d="M252.52,431.58l9.18,13,1-.11,10.11-1.09-1.49-13.84,10.93-1.18,5.23,48.45-21,2.27c-12.67,1.36-20.53-3.95-21.68-14.68-.81-7.48,1.79-13.22,7.38-16.62l-12-14.88Zm21.3,20.95-10.1,1.09c-6,.64-9.18,3.79-8.59,9.32s4.34,7.73,10.36,7.08l10.1-1.09Z"/><path d="M179.31,448.47c2.37-13.86,15.3-22.6,30-20.09s24,15,21.62,28.9-15.28,22.46-30,20S176.93,462.4,179.31,448.47Zm40.48,6.91a15.15,15.15,0,0,0-12.25-17.56,15.18,15.18,0,1,0,12.25,17.56Z"/><path d="M146.28,460.66l15.95-35.72-19.06-8.52,3.91-8.77,29.11,13-19.87,44.49Z"/><path d="M103.1,436.43,126,404.73l-16.92-12.24,5.63-7.78,25.83,18.69L112,442.88Z"/><path d="M47.35,337.88c12-7.9,26.2-4.53,34.68,8.31l11.15,16.9L52.52,389.93,41.13,372.68C32.81,360.08,35.33,345.82,47.35,337.88Zm6.23,9.32c-7.49,4.94-9.21,13.59-4.61,20.56l5.22,7.9L79.4,359l-5.48-8.3C69.43,343.91,61,342.29,53.58,347.2Z"/><path d="M27.37,279.05c13.43-4.18,27.08,3.38,31.51,17.6S56.43,324.82,42.94,329,16,325.61,11.57,311.39,13.88,283.26,27.37,279.05Zm12.22,39.21a15.16,15.16,0,0,0,10.08-18.89,14.92,14.92,0,0,0-18.94-9.55,14.78,14.78,0,0,0-10,18.58A15,15,0,0,0,39.59,318.26Z"/><path d="M.37,257.32l37.05-9.09L1,236.93l.33-10.78L38.39,217,2,205.69l.35-11.27,48.21,17.65-.35,11.34-35,8.74,34.41,11.09-.35,11.34L0,269.15Z"/><path d="M12.57,164.82l37.72-10.9L21,142.72,24.77,133l45.5,17.42-3.58,9.36L29.06,170.62l29.19,11.17-3.76,9.82L9,174.18Z"/><path d="M79.63,102.84a5.19,5.19,0,1,1-7.41.66A5.08,5.08,0,0,1,79.63,102.84Z"/></g></g></svg>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 186.28 242" class="scroll-icon"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M81,34.14A6.63,6.63,0,0,0,85.53,36,6.28,6.28,0,0,0,90,34.14a6.37,6.37,0,0,0,0-9,6.33,6.33,0,0,0-4.51-1.88A6.44,6.44,0,0,0,81,25.12a6.61,6.61,0,0,0,0,9ZM75,242a21.37,21.37,0,0,0,21.35-21.35h0V189.3a21.27,21.27,0,0,0,27-8.68,21.28,21.28,0,0,0,32.31-12.78,21.3,21.3,0,0,0,30.61-19.22v-33.3a77,77,0,0,0-26.11-57.8l0-39.25a6.37,6.37,0,0,0-3.13-5.48c-2-1.16-48.73-28.19-96.4,0a6.38,6.38,0,0,0-3.14,5.48V58c-1,.9-2,1.74-3,2.69l-48.46,52a21.34,21.34,0,0,0,.15,30c7.56,7.58,18.59,8.77,28.78,3.15l18.64-10.28v85h0A21.39,21.39,0,0,0,75,242ZM109.11,38.16A76.67,76.67,0,0,0,70.27,48.71V22c33.67-18,67-4.75,77.16.13V48.38a76.71,76.71,0,0,0-38.32-10.22ZM75,229.26a8.61,8.61,0,0,1-8.61-8.6V124.93s0-.07,0-.09,0-.07,0-.11v-12.8a6.38,6.38,0,0,0-12.75,0v9.16L28.88,134.78c-2.44,1.35-8.65,3.95-13.61-1a8.83,8.83,0,0,1,0-12.19L63.58,69.78a64.32,64.32,0,0,1,86.3-4.25c.13.08.22.19.35.27a64.34,64.34,0,0,1,23.3,49.55v33.3a8.61,8.61,0,1,1-17.21,0V135.43a6.38,6.38,0,0,0-12.76,0v27.32a8.61,8.61,0,1,1-17.21,0V139a6.38,6.38,0,0,0-12.75,0V169.8a8.61,8.61,0,0,1-17.22,0V142.48a6.38,6.38,0,1,0-12.75,0v78.19a8.63,8.63,0,0,1-8.61,8.6Z"/></g></g></svg>
    </div>
  </a>
</div>

<div class="aboutus">
<h3>Myfolteについて</h3>
<p> 本サイトは、「有名ではないけれどもいい曲を知りたい」、「他の人のお気に入りの曲を知りたい」という
思いから作られた音楽紹介サイトです。「有名ではないけれどもおススメしたい！」、「マイナーだけれどもハマっている」
という曲を紹介してください。<br>
 他の人の投稿は、「カップリング」、「アーティスト」、「時代」、「その他」のうちから、
どのような点でマイナーかによって探すこともできます。
</div>


<h2>ランキング</h2>
<div class="post-container">
<% last_like = 0 %>
<% j = 1 %>
<% @rank_posts.each.with_index(1) do |t, i| %>
      <% if i == 1 %>
            <% last_like = t.likes.count %>
          <% end %>
          <% if t.likes.count != last_like %>
            <% j = i %>
            <% last_like = t.likes.count %>
          <% else %>
            <% last_like = t.likes.count %>
      <% end %>
      <% if j == 1 %>
        <div class="post box1 "> 
        <div class="box1_tape"> </div>
        <a href="/users/<%= t.user.id %>"><%= t.user.username %></a>

          <span class="post-header"><i class="fas fa-crown"></i> 第<%= j %>位</span>
          
            <div><%= t.music %></div>
            <div><%= t.artist %></div>
            <div class="keyword">
              <%= safe_join(t.okiniiri.split("\n"),tag(:br)) %>
            </div>
            <div><%= t.genre %></div>
            <div><%= t.minor %></div>

            

            <% if user_signed_in? %>
              <% if current_user.already_liked?(t) %>
                <%= link_to post_like_path(id: t.id, post_id: t.id), method: :delete do %>
                  <i class="fas fa-heart"></i><%= t.likes.count %>
                <% end %>
              <% else %>
                <%= link_to post_likes_path(id: t.id, post_id: t.id), method: :post do %>
                  <i class="far fa-heart"></i><%= t.likes.count %>
                <% end %>
              <% end %>
            <% else %>
              <i class="far fa-heart"></i><%= t.likes.count %>
            <% end %>

            <%= t.created_at %><br>
            <%= link_to "詳細へ", post_path(t.id) %><br>
            <% if user_signed_in? && current_user.id == t.user_id %>
            <%= link_to "編集する", edit_post_path(t.id) %><br>
            <%= link_to "削除する", post_path(t.id), method: :delete %>
          <% end %>
          </div>
          <% elsif j == 2 %>
          <div class="post box5 "> 
        <div class="box1_tape"> </div>
        <a href="/users/<%= t.user.id %>"><%= t.user.username %></a>

          <span class="post-header"><i class="fas fa-crown"></i> 第<%= j %>位</span>
          
            <div><%= t.music %></div>
            <div><%= t.artist %></div>
            <div class="keyword">
              <%= safe_join(t.okiniiri.split("\n"),tag(:br)) %>
            </div>
            <div><%= t.genre %></div>
            <div><%= t.minor %></div>

            

            <% if user_signed_in? %>
              <% if current_user.already_liked?(t) %>
                <%= link_to post_like_path(id: t.id, post_id: t.id), method: :delete do %>
                  <i class="fas fa-heart"></i><%= t.likes.count %>
                <% end %>
              <% else %>
                <%= link_to post_likes_path(id: t.id, post_id: t.id), method: :post do %>
                  <i class="far fa-heart"></i><%= t.likes.count %>
                <% end %>
              <% end %>
            <% else %>
              <i class="far fa-heart"></i><%= t.likes.count %>
            <% end %>

            <%= t.created_at %><br>
            <%= link_to "詳細へ", post_path(t.id) %><br>
            <% if user_signed_in? && current_user.id == t.user_id %>
            <%= link_to "編集する", edit_post_path(t.id) %><br>
            <%= link_to "削除する", post_path(t.id), method: :delete %>
          <% end %>
          </div>
          <% else %>
          <div class="post box6 "> 
        <div class="box1_tape"> </div>
        <a href="/users/<%= t.user.id %>"><%= t.user.username %></a>

          <span class="post-header"><i class="fas fa-crown"></i> 第<%= j %>位</span>
          
            <div><%= t.music %></div>
            <div><%= t.artist %></div>
            <div class="keyword">
              <%= safe_join(t.okiniiri.split("\n"),tag(:br)) %>
            </div>
            <div><%= t.genre %></div>
            <div><%= t.minor %></div>

            

            <% if user_signed_in? %>
              <% if current_user.already_liked?(t) %>
                <%= link_to post_like_path(id: t.id, post_id: t.id), method: :delete do %>
                  <i class="fas fa-heart"></i><%= t.likes.count %>
                <% end %>
              <% else %>
                <%= link_to post_likes_path(id: t.id, post_id: t.id), method: :post do %>
                  <i class="far fa-heart"></i><%= t.likes.count %>
                <% end %>
              <% end %>
            <% else %>
              <i class="far fa-heart"></i><%= t.likes.count %>
            <% end %>

            <%= t.created_at %><br>
            <%= link_to "詳細へ", post_path(t.id) %><br>
            <% if user_signed_in? && current_user.id == t.user_id %>
            <%= link_to "編集する", edit_post_path(t.id) %><br>
            <%= link_to "削除する", post_path(t.id), method: :delete %>
          <% end %>
          </div>
          <% end %>
<% end %>
</div>


 <h2>投稿一覧</h2>
 <section id="area-2">
<div class="post-container2">
<% @posts.each do |t| %>
  <div class="post loose-leaf">
  <a href="/users/<%= t.user.id %>"><%= t.user.username %></a>
    <div><%= t.music %></div>
    <div><%= t.artist %></div>
    <div class="keyword">
        <%= safe_join(t.okiniiri.split("\n"),tag(:br)) %>
    </div>
    <div><%= t.genre %></div>
    <div><%= t.minor %></div>

    <% if user_signed_in? %>
      <% if current_user.already_liked?(t) %>
        <%= link_to post_like_path(id: t.id, post_id: t.id), method: :delete do %>
          <i class="fas fa-heart"></i><%= t.likes.count %>
        <% end %>
      <% else %>
        <%= link_to post_likes_path(id: t.id, post_id: t.id), method: :post do %>
          <i class="far fa-heart"></i><%= t.likes.count %>
        <% end %>
      <% end %>
    <% else %>
      <i class="far fa-heart"></i><%= t.likes.count %>
    <% end %>

    <%= t.created_at %><br>
    <%= link_to "詳細へ", post_path(t.id) %><br>
    <% if user_signed_in? && current_user.id == t.user_id %>
      <%= link_to "編集する", edit_post_path(t.id) %><br>
      <%= link_to "削除する", post_path(t.id), method: :delete %>
    <% end %>
  </div>
<% end %>
</div>
</section>

</body>

